<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Peter Ganong and Maggie Shi">
<meta name="dcterms.date" content="2024-10-07">

<title>Visualization (Marks and Encoding)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="marks_encoding_files/libs/clipboard/clipboard.min.js"></script>
<script src="marks_encoding_files/libs/quarto-html/quarto.js"></script>
<script src="marks_encoding_files/libs/quarto-html/popper.min.js"></script>
<script src="marks_encoding_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="marks_encoding_files/libs/quarto-html/anchor.min.js"></script>
<link href="marks_encoding_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="marks_encoding_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="marks_encoding_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="marks_encoding_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="marks_encoding_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#global-health-data" id="toc-global-health-data" class="nav-link active" data-scroll-target="#global-health-data">Global Health Data</a>
  <ul class="collapse">
  <li><a href="#introducing-global-health-data" id="toc-introducing-global-health-data" class="nav-link" data-scroll-target="#introducing-global-health-data">Introducing global health data</a></li>
  <li><a href="#load-data" id="toc-load-data" class="nav-link" data-scroll-target="#load-data">Load data</a></li>
  <li><a href="#head-summary" id="toc-head-summary" class="nav-link" data-scroll-target="#head-summary"><code>head()</code> + summary</a></li>
  </ul></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types">Data types</a>
  <ul class="collapse">
  <li><a href="#data-types-roadmap" id="toc-data-types-roadmap" class="nav-link" data-scroll-target="#data-types-roadmap">Data types: roadmap</a></li>
  <li><a href="#nominal-n" id="toc-nominal-n" class="nav-link" data-scroll-target="#nominal-n">Nominal (N)</a></li>
  <li><a href="#ordinal-o" id="toc-ordinal-o" class="nav-link" data-scroll-target="#ordinal-o">Ordinal (O)</a></li>
  <li><a href="#quantitative-q" id="toc-quantitative-q" class="nav-link" data-scroll-target="#quantitative-q">Quantitative (Q)</a></li>
  <li><a href="#quantitative-q-continued" id="toc-quantitative-q-continued" class="nav-link" data-scroll-target="#quantitative-q-continued">Quantitative (Q), continued</a></li>
  <li><a href="#example-of-a-potentially-misleading-plot-by-omitting-zeros" id="toc-example-of-a-potentially-misleading-plot-by-omitting-zeros" class="nav-link" data-scroll-target="#example-of-a-potentially-misleading-plot-by-omitting-zeros">Example of a potentially misleading plot by omitting zeros</a></li>
  <li><a href="#temporal-t" id="toc-temporal-t" class="nav-link" data-scroll-target="#temporal-t">Temporal (T)</a></li>
  <li><a href="#discussion-question-i" id="toc-discussion-question-i" class="nav-link" data-scroll-target="#discussion-question-i">Discussion question I</a></li>
  <li><a href="#discussion-question-ii" id="toc-discussion-question-ii" class="nav-link" data-scroll-target="#discussion-question-ii">Discussion question II</a></li>
  <li><a href="#revisit-plot-from-beginning-of-prior-lecture" id="toc-revisit-plot-from-beginning-of-prior-lecture" class="nav-link" data-scroll-target="#revisit-plot-from-beginning-of-prior-lecture">Revisit plot from beginning of prior lecture</a></li>
  <li><a href="#in-class-exercises" id="toc-in-class-exercises" class="nav-link" data-scroll-target="#in-class-exercises">In-class exercises</a></li>
  <li><a href="#in-class-exercises-solution-precipitation-ordinal" id="toc-in-class-exercises-solution-precipitation-ordinal" class="nav-link" data-scroll-target="#in-class-exercises-solution-precipitation-ordinal">In-class exercises: solution precipitation ordinal</a></li>
  <li><a href="#in-class-exercises-solution-date-temporal" id="toc-in-class-exercises-solution-date-temporal" class="nav-link" data-scroll-target="#in-class-exercises-solution-date-temporal">In-class exercises: solution date temporal</a></li>
  <li><a href="#data-types-summary" id="toc-data-types-summary" class="nav-link" data-scroll-target="#data-types-summary">data types: summary</a></li>
  </ul></li>
  <li><a href="#visual-encoding" id="toc-visual-encoding" class="nav-link" data-scroll-target="#visual-encoding">Visual encoding</a>
  <ul class="collapse">
  <li><a href="#visual-encoding-roadmap" id="toc-visual-encoding-roadmap" class="nav-link" data-scroll-target="#visual-encoding-roadmap">Visual encoding roadmap</a></li>
  <li><a href="#seven-ways-of-visual-encoding-i" id="toc-seven-ways-of-visual-encoding-i" class="nav-link" data-scroll-target="#seven-ways-of-visual-encoding-i">Seven ways of visual encoding I</a></li>
  <li><a href="#seven-ways-of-visual-encoding-ii" id="toc-seven-ways-of-visual-encoding-ii" class="nav-link" data-scroll-target="#seven-ways-of-visual-encoding-ii">Seven ways of visual encoding II</a></li>
  <li><a href="#seven-ways-of-visual-encoding-in-one-image" id="toc-seven-ways-of-visual-encoding-in-one-image" class="nav-link" data-scroll-target="#seven-ways-of-visual-encoding-in-one-image">Seven ways of visual encoding in one image</a></li>
  <li><a href="#more-depth-on-color" id="toc-more-depth-on-color" class="nav-link" data-scroll-target="#more-depth-on-color">More depth on color</a></li>
  <li><a href="#color-palettes-and-their-use-cases" id="toc-color-palettes-and-their-use-cases" class="nav-link" data-scroll-target="#color-palettes-and-their-use-cases">Color palettes and their use cases</a></li>
  <li><a href="#more-advice-on-color-choices" id="toc-more-advice-on-color-choices" class="nav-link" data-scroll-target="#more-advice-on-color-choices">More advice on color choices</a></li>
  <li><a href="#visual-encoding-summary" id="toc-visual-encoding-summary" class="nav-link" data-scroll-target="#visual-encoding-summary">Visual encoding: summary</a></li>
  </ul></li>
  <li><a href="#encoding-channels" id="toc-encoding-channels" class="nav-link" data-scroll-target="#encoding-channels">Encoding channels</a>
  <ul class="collapse">
  <li><a href="#encoding-channels-roadmap" id="toc-encoding-channels-roadmap" class="nav-link" data-scroll-target="#encoding-channels-roadmap">Encoding channels: roadmap</a></li>
  <li><a href="#x" id="toc-x" class="nav-link" data-scroll-target="#x">X</a></li>
  <li><a href="#y" id="toc-y" class="nav-link" data-scroll-target="#y">Y</a></li>
  <li><a href="#do-not-require-zero-on-axis-range" id="toc-do-not-require-zero-on-axis-range" class="nav-link" data-scroll-target="#do-not-require-zero-on-axis-range">Do not require zero on axis range</a></li>
  <li><a href="#observations-about-whether-to-include-zero" id="toc-observations-about-whether-to-include-zero" class="nav-link" data-scroll-target="#observations-about-whether-to-include-zero">Observations about whether to include zero</a></li>
  <li><a href="#size" id="toc-size" class="nav-link" data-scroll-target="#size"><code>size</code></a></li>
  <li><a href="#size-with-1000-pixels-for-largest-dot" id="toc-size-with-1000-pixels-for-largest-dot" class="nav-link" data-scroll-target="#size-with-1000-pixels-for-largest-dot"><code>size</code> with 1000 pixels for largest dot</a></li>
  <li><a href="#add-color-and-size-with-filledtrue" id="toc-add-color-and-size-with-filledtrue" class="nav-link" data-scroll-target="#add-color-and-size-with-filledtrue">add <code>color</code> and <code>size</code> with <code>filled=True</code></a></li>
  <li><a href="#opacity" id="toc-opacity" class="nav-link" data-scroll-target="#opacity"><code>opacity</code></a></li>
  <li><a href="#column" id="toc-column" class="nav-link" data-scroll-target="#column"><code>column</code></a></li>
  <li><a href="#adjust-aspect-ratio-move-pop-legend-remove-color-legend" id="toc-adjust-aspect-ratio-move-pop-legend-remove-color-legend" class="nav-link" data-scroll-target="#adjust-aspect-ratio-move-pop-legend-remove-color-legend">adjust aspect ratio, move pop legend, remove color legend</a></li>
  <li><a href="#in-class-exercise" id="toc-in-class-exercise" class="nav-link" data-scroll-target="#in-class-exercise">in-class exercise</a></li>
  <li><a href="#in-class-exercise-solution" id="toc-in-class-exercise-solution" class="nav-link" data-scroll-target="#in-class-exercise-solution">in-class exercise: solution</a></li>
  <li><a href="#encoding-channels-summary" id="toc-encoding-channels-summary" class="nav-link" data-scroll-target="#encoding-channels-summary">Encoding channels: summary</a></li>
  </ul></li>
  <li><a href="#graphical-marks" id="toc-graphical-marks" class="nav-link" data-scroll-target="#graphical-marks">Graphical marks</a>
  <ul class="collapse">
  <li><a href="#graphical-marks-roadmap" id="toc-graphical-marks-roadmap" class="nav-link" data-scroll-target="#graphical-marks-roadmap">Graphical marks: roadmap</a></li>
  <li><a href="#mark_point-add-information-using-alt.shape" id="toc-mark_point-add-information-using-alt.shape" class="nav-link" data-scroll-target="#mark_point-add-information-using-alt.shape"><code>mark_point()</code>: add information using <code>alt.Shape()</code></a></li>
  <li><a href="#mark_point-format-points-using-arguments" id="toc-mark_point-format-points-using-arguments" class="nav-link" data-scroll-target="#mark_point-format-points-using-arguments"><code>mark_point()</code>: format points using arguments</a></li>
  <li><a href="#mark_circle-wrapper-for-mark_pointfilledtrue" id="toc-mark_circle-wrapper-for-mark_pointfilledtrue" class="nav-link" data-scroll-target="#mark_circle-wrapper-for-mark_pointfilledtrue"><code>mark_circle()</code> wrapper for <code>mark_point(filled=True)</code></a></li>
  <li><a href="#mark_square" id="toc-mark_square" class="nav-link" data-scroll-target="#mark_square"><code>mark_square()</code></a></li>
  <li><a href="#mark_tick" id="toc-mark_tick" class="nav-link" data-scroll-target="#mark_tick"><code>mark_tick()</code></a></li>
  <li><a href="#mark_bar" id="toc-mark_bar" class="nav-link" data-scroll-target="#mark_bar"><code>mark_bar()</code></a></li>
  <li><a href="#use-alt.color-for-a-stacked-bar-plot" id="toc-use-alt.color-for-a-stacked-bar-plot" class="nav-link" data-scroll-target="#use-alt.color-for-a-stacked-bar-plot">use <code>alt.Color()</code> for a stacked bar plot</a></li>
  <li><a href="#x2-to-show-intervals" id="toc-x2-to-show-intervals" class="nav-link" data-scroll-target="#x2-to-show-intervals"><code>X2()</code> to show intervals</a></li>
  <li><a href="#mark_line" id="toc-mark_line" class="nav-link" data-scroll-target="#mark_line"><code>mark_line()</code></a></li>
  <li><a href="#how-many-lines-tooltip-instead-of-legend" id="toc-how-many-lines-tooltip-instead-of-legend" class="nav-link" data-scroll-target="#how-many-lines-tooltip-instead-of-legend">how many lines? <code>Tooltip</code> instead of <code>legend</code></a></li>
  <li><a href="#mark_line-with-cosmetic-adjustments" id="toc-mark_line-with-cosmetic-adjustments" class="nav-link" data-scroll-target="#mark_line-with-cosmetic-adjustments"><code>mark_line()</code> with cosmetic adjustments</a></li>
  <li><a href="#mark_line-with-cosmetic-adjustments-1" id="toc-mark_line-with-cosmetic-adjustments-1" class="nav-link" data-scroll-target="#mark_line-with-cosmetic-adjustments-1"><code>mark_line()</code> with cosmetic adjustments</a></li>
  <li><a href="#mark_area" id="toc-mark_area" class="nav-link" data-scroll-target="#mark_area"><code>mark_area()</code></a></li>
  <li><a href="#mark_area-with-interpolatemonotone" id="toc-mark_area-with-interpolatemonotone" class="nav-link" data-scroll-target="#mark_area-with-interpolatemonotone"><code>mark_area()</code> with <code>interpolate='monotone'</code></a></li>
  <li><a href="#mark_area-with-stacking" id="toc-mark_area-with-stacking" class="nav-link" data-scroll-target="#mark_area-with-stacking"><code>mark_area()</code> with stacking</a></li>
  <li><a href="#mark_area-with-no-stacking-and-opacity" id="toc-mark_area-with-no-stacking-and-opacity" class="nav-link" data-scroll-target="#mark_area-with-no-stacking-and-opacity"><code>mark_area()</code> with no stacking and opacity</a></li>
  <li><a href="#mark_area-to-show-range" id="toc-mark_area-to-show-range" class="nav-link" data-scroll-target="#mark_area-to-show-range"><code>mark_area()</code> to show range</a></li>
  <li><a href="#syntax-mark_area-swap-axes" id="toc-syntax-mark_area-swap-axes" class="nav-link" data-scroll-target="#syntax-mark_area-swap-axes">Syntax: <code>mark_area()</code> swap axes</a></li>
  <li><a href="#graphical-marks-summary" id="toc-graphical-marks-summary" class="nav-link" data-scroll-target="#graphical-marks-summary">Graphical marks: summary</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Visualization (Marks and Encoding)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Peter Ganong and Maggie Shi </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 7, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<!--
 beamer:
        fig-width: 5
        fig-height: 3.5
        aspectratio: 169
        theme: default
        header-includes: \renewcommand{\tightlist}{\setlength{\itemsep}{3ex}\setlength{\parskip}{0pt}}
            \setbeamertemplate{footline}[frame number]
            \usepackage{fvextra}
            \DefineVerbatimEnvironment{Highlighting}{Verbatim}{breaklines,commandchars=\\\{\}}
            \DefineVerbatimEnvironment{OutputCode}{Verbatim}{breaklines,commandchars=\\\{\}}
        -->
<section id="global-health-data" class="level1">
<h1>Global Health Data</h1>
<section id="introducing-global-health-data" class="level2">
<h2 class="anchored" data-anchor-id="introducing-global-health-data">Introducing global health data</h2>
<ul>
<li><p>We will be visualizing global health and population data for a number of countries, over the time period of 1955 to 2005.</p></li>
<li><p>The data was collected by the <a href="https://www.gapminder.org/">Gapminder Foundation</a> and shared in <a href="https://www.youtube.com/watch?v=hVimVzgtD6w">Hans Rosling’s fantastic TED talk</a>.</p></li>
<li><p>If you haven’t seen the talk, we encourage you to watch it first!</p></li>
<li><p>Roadmap: load data and review first five rows</p></li>
</ul>
</section>
<section id="load-data" class="level2">
<h2 class="anchored" data-anchor-id="load-data">Load data</h2>
<p>Let’s first load the dataset from the <a href="https://github.com/vega/vega-datasets">vega-datasets</a> collection into a Pandas data frame.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> vega_datasets <span class="im">import</span> data <span class="im">as</span> vega_data</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>alt.renderers.enable(<span class="st">'png'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>RendererRegistry.enable('png')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> vega_data.gapminder()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- Remark: I (Peter) couldn't get the command 
data = vega_data.gapminder()
to work. instead, I saved the data to local and I read it in from local. The code chunk which does this is set to echo false so it won't show up in the lecture notes-->
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>(682, 6)</code></pre>
</div>
</div>
</section>
<section id="head-summary" class="level2">
<h2 class="anchored" data-anchor-id="head-summary"><code>head()</code> + summary</h2>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data.head(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>cluster</th>
      <th>pop</th>
      <th>life_expect</th>
      <th>fertility</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1955</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>7971931</td>
      <td>43.88</td>
      <td>7.42</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1960</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>8622466</td>
      <td>45.03</td>
      <td>7.38</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1965</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>9565147</td>
      <td>46.13</td>
      <td>7.35</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1970</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>10752971</td>
      <td>47.08</td>
      <td>7.40</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1975</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>12157386</td>
      <td>47.55</td>
      <td>7.54</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>For each <code>country</code> and <code>year</code> (in 5-year intervals), we have</p>
<ul>
<li>fertility in terms of the number of children per woman (<code>fertility</code>) </li>
<li>life expectancy in years (<code>life_expect</code>) </li>
<li>total population (<code>pop</code>) </li>
<li>mysterious <code>cluster</code> – what might this represent? We’ll try and solve this mystery as we visualize the data!</li>
</ul>
</section>
</section>
<section id="data-types" class="level1">
<h1>Data types</h1>
<section id="data-types-roadmap" class="level2">
<h2 class="anchored" data-anchor-id="data-types-roadmap">Data types: roadmap</h2>
<p>Pandas data frames come with types. When loading data not from pandas, explicitly name:</p>
<ul>
<li><code>'N'</code> indicates a <em>nominal</em> type (unordered, categorical data),</li>
<li><code>'O'</code> indicates an <em>ordinal</em> type (rank-ordered data),</li>
<li><code>'Q'</code> indicates a <em>quantitative</em> type (numerical data with meaningful magnitudes), and</li>
<li><code>'T'</code> indicates a <em>temporal</em> type (date/time data)</li>
</ul>
</section>
<section id="nominal-n" class="level2">
<h2 class="anchored" data-anchor-id="nominal-n">Nominal (N)</h2>
<ul>
<li><em>Nominal</em> data (also called <em>categorical</em> data) consist of category names.</li>
<li>Ask <em>is value A the same or different than value B? (A = B)</em>, supporting statements like “A is equal to B” or “A is not equal to B”.
<ul>
<li>In the dataset above, the <code>country</code> field is <code>N</code>ominal.</li>
</ul></li>
<li>When visualizing nominal data we should readily be able to see if values are the same or different: position, color hue (blue, red, green), and shape can help.
<ul>
<li>Remark: using a <code>size</code> channel to encode nominal data might mislead us, suggesting rank-order or magnitude differences among values that do not exist!</li>
</ul></li>
</ul>
</section>
<section id="ordinal-o" class="level2">
<h2 class="anchored" data-anchor-id="ordinal-o">Ordinal (O)</h2>
<ul>
<li><em>Ordinal</em> data consist of values that have a specific ordering.</li>
<li>Ask: <em>does value A come before or after value B? (A &lt; B)</em>, supporting statements like “A is less than B” or “A is greater than B”.
<ul>
<li>In the dataset above, we can treat the <code>year</code> field as <code>O</code>rdinal.</li>
</ul></li>
<li>When visualizing ordinal data, we should perceive a sense of rank-order. Position, size, or color value (brightness) might be appropriate.
<ul>
<li>Remark: color hue (which is not perceptually ordered) would be less appropriate.</li>
</ul></li>
</ul>
</section>
<section id="quantitative-q" class="level2">
<h2 class="anchored" data-anchor-id="quantitative-q">Quantitative (Q)</h2>
<ul>
<li>With <em>quantitative</em> data we can measure numerical differences among values. There are multiple sub-types of quantitative data:
<ul>
<li>With <em>interval</em> data ask: <em>what is the distance to value A from value B? (A - B)</em>, supporting statements such as “A is 12 units away from B”.</li>
<li>With <em>ratio</em> data can also ask:
<ul>
<li><em>how many are there of value A?</em> supporting statements such as “how many babies per parent?”</li>
<li><em>value A is what proportion of value B? (A / B)</em>, supporting statements such as “A is 10% of B” or “B is 7 times larger than A”.</li>
</ul></li>
<li>In the dataset above, <code>year</code> is a quantitative interval field (depending on whose history of the world you prefer, there are many choices for the year “zero”), whereas <code>fertility</code> and <code>life_expect</code> are quantitative ratio fields (zero is meaningful for calculating proportions). </li>
</ul></li>
<li>Vega-Lite represents quantitative data, but does not make a distinction between interval and ratio types.</li>
<li>Quantitative values can be visualized using position, size, or color value, among other channels.</li>
</ul>
</section>
<section id="quantitative-q-continued" class="level2">
<h2 class="anchored" data-anchor-id="quantitative-q-continued">Quantitative (Q), continued</h2>
<ul>
<li>recap
<ul>
<li>with <em>interval</em> data ask: <em>what is the distance to value A from value B? (A - B)</em></li>
<li>With <em>ratio</em> data can also ask:
<ul>
<li><em>how many are there of value A?</em></li>
<li><em>value A is what proportion of value B? (A / B)</em>,</li>
</ul></li>
</ul></li>
<li>Textbook: “An axis with a zero baseline is essential for proportional comparisons of ratio values, but can be safely omitted for interval comparisons.”</li>
<li>Discussion question – Why is it so important to include zeros for ratio data? Can you give a counter-example where omitting zeros on the plot would lead the reader to misleading conclusions?</li>
</ul>
<!-- ZZZ delete before posting -->
</section>
<section id="example-of-a-potentially-misleading-plot-by-omitting-zeros" class="level2">
<h2 class="anchored" data-anchor-id="example-of-a-potentially-misleading-plot-by-omitting-zeros">Example of a potentially misleading plot by omitting zeros</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pictures/usa-today.jpg" style="height:85.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">USAToday</figcaption><p></p>
</figure>
</div>
<p>via <a href="https://www.statisticshowto.com/probability-and-statistics/descriptive-statistics/misleading-graphs/">Statistics How To</a></p>
</section>
<section id="temporal-t" class="level2">
<h2 class="anchored" data-anchor-id="temporal-t">Temporal (T)</h2>
<ul>
<li><em>Temporal</em> values measure time points or intervals. This type is a special case of quantitative values (timestamps) with rich semantics and conventions (i.e., the <a href="https://en.wikipedia.org/wiki/Gregorian_calendar">Gregorian calendar</a>).</li>
<li>Example temporal values include date strings such as <code>“2019-01-04”</code> and <code>“Jan 04 2019”</code>, as well as standardized date-times such as the <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO date-time format</a>: <code>“2019-01-04T17:50:35.643Z”</code>.</li>
<li>There are no temporal values in our global development dataset above, as the <code>year</code> field is simply encoded as an integer.</li>
</ul>
</section>
<section id="discussion-question-i" class="level2">
<h2 class="anchored" data-anchor-id="discussion-question-i">Discussion question I</h2>
<p>What are examples of variables that are</p>
<ul>
<li><code>N</code>ominal</li>
<li><code>O</code>rdinal</li>
<li><code>Q</code>uantitative</li>
</ul>
<p>Let’s try to come up with at least three examples of each. For each example, state the comparison in a sentence.</p>
</section>
<section id="discussion-question-ii" class="level2">
<h2 class="anchored" data-anchor-id="discussion-question-ii">Discussion question II</h2>
<p>Suppose we have a dataset of ages (10 years old, 20 years old, 10 years old, 30 years old). What would it mean for these data to be</p>
<ul>
<li><code>N</code>ominal</li>
<li><code>O</code>rdinal</li>
<li><code>Q</code>uantitative</li>
</ul>
<p>What comparisons are feasible with each data type?</p>
</section>
<section id="revisit-plot-from-beginning-of-prior-lecture" class="level2">
<h2 class="anchored" data-anchor-id="revisit-plot-from-beginning-of-prior-lecture">Revisit plot from beginning of prior lecture</h2>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>seattle <span class="op">=</span> vega_data.seattle_weather()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>alt.Chart(seattle).mark_bar().encode(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="st">'month(date):O'</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="st">'average(precipitation):Q'</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<p><img src="marks_encoding_files/figure-html/cell-7-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="in-class-exercises" class="level2">
<h2 class="anchored" data-anchor-id="in-class-exercises">In-class exercises</h2>
<p>What happens when…</p>
<ul>
<li>Make <code>precipitation</code> ordinal</li>
<li>Revert. then make <code>date</code> temporal. There’s a consequential but subtle change relative to the original plot. What is it?</li>
</ul>
<!-- ZZZ delete before posting QMD-->
</section>
<section id="in-class-exercises-solution-precipitation-ordinal" class="level2">
<h2 class="anchored" data-anchor-id="in-class-exercises-solution-precipitation-ordinal">In-class exercises: solution precipitation ordinal</h2>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>seattle <span class="op">=</span> vega_data.seattle_weather()</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>alt.Chart(seattle).mark_bar().encode(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="st">'month(date):O'</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="st">'average(precipitation):O'</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<p><img src="marks_encoding_files/figure-html/cell-8-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="in-class-exercises-solution-date-temporal" class="level2">
<h2 class="anchored" data-anchor-id="in-class-exercises-solution-date-temporal">In-class exercises: solution date temporal</h2>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>seattle <span class="op">=</span> vega_data.seattle_weather()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>alt.Chart(seattle).mark_bar().encode(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="st">'month(date):T'</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="st">'average(precipitation):Q'</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<p><img src="marks_encoding_files/figure-html/cell-9-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Answer:</p>
<ul>
<li>When <code>month(date)</code> is <code>O</code>rdinal we had a bar graph with 12 categories. The label is in the middle of each bar.</li>
<li>When <code>month(date)</code> is <code>T</code>rdinal we had a bar graph which marks dates for the beginning of each month. The labels are at the tick marks. We have 13 labels because we also pick up an extra “Jan” at the end</li>
</ul>
<!-- ZZZ end deletion before posting QMD-->
</section>
<section id="data-types-summary" class="level2">
<h2 class="anchored" data-anchor-id="data-types-summary">data types: summary</h2>
<p>A single data series can have multiple meanings depending on data type</p>
<ul>
<li><code>'N'</code> indicates a <em>nominal</em> type (unordered, categorical data),</li>
<li><code>'O'</code> indicates an <em>ordinal</em> type (rank-ordered data),</li>
<li><code>'Q'</code> indicates a <em>quantitative</em> type (numerical data with meaningful magnitudes), and</li>
<li><code>'T'</code> indicates a <em>temporal</em> type (date/time data)</li>
</ul>
<p>Explicitly specify the data type so that Altair/Vega know how to interpret it. If you don’t specify a data type (as was the case in Lecture 1), Vega will guess. This can lead to undesired results!</p>
</section>
</section>
<section id="visual-encoding" class="level1">
<h1>Visual encoding</h1>
<section id="visual-encoding-roadmap" class="level2">
<h2 class="anchored" data-anchor-id="visual-encoding-roadmap">Visual encoding roadmap</h2>
<ul>
<li>Seven types of visual encoding</li>
<li>More on color</li>
</ul>
</section>
<section id="seven-ways-of-visual-encoding-i" class="level2">
<h2 class="anchored" data-anchor-id="seven-ways-of-visual-encoding-i">Seven ways of visual encoding I</h2>
<p>Source: Jacques Bertin in Semiology of Graphics (1967), via <a href="https://medium.com/@mbostock/introducing-d3-scale-61980c51545f">source</a></p>
<blockquote class="blockquote">
<p>Within the plane a mark can be at the top or the bottom, to the right or the left. The eye perceives two independent dimensions along X and Y, which are distinguished orthogonally. A variation in light energy produces a third dimension in Z, which is independent of X and Y…</p>
</blockquote>
</section>
<section id="seven-ways-of-visual-encoding-ii" class="level2">
<h2 class="anchored" data-anchor-id="seven-ways-of-visual-encoding-ii">Seven ways of visual encoding II</h2>
<blockquote class="blockquote">
<p>The eye is sensitive, along the Z dimension, to 6 independent visual variables, which can be superimposed on the planar figures:</p>
</blockquote>
<blockquote class="blockquote">
<ul>
<li>the size of the marks</li>
<li>their value [brightness]</li>
<li>texture</li>
<li>color [hue]</li>
<li>orientation</li>
<li>shape.</li>
</ul>
</blockquote>
<blockquote class="blockquote">
<p>They can represent differences (≠), similarities (≡), a quantified order (Q), or a nonquantified order (O), and can express groups, hierarchies, or vertical movements.</p>
</blockquote>
</section>
<section id="seven-ways-of-visual-encoding-in-one-image" class="level2">
<h2 class="anchored" data-anchor-id="seven-ways-of-visual-encoding-in-one-image">Seven ways of visual encoding in one image</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pictures/visual_encoding.jpg" style="height:85.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Visual encoding</figcaption><p></p>
</figure>
</div>
<p>Free advice: don’t try to use all seven ways of encoding information in a single plot. It will inevitably be overload.</p>
</section>
<section id="more-depth-on-color" class="level2">
<h2 class="anchored" data-anchor-id="more-depth-on-color">More depth on color</h2>
<p>Language note: by <code>color</code>, we mean both brightness (which Bertin calls “value”) and hue (which Bertin calls “color”)</p>
<p>Why choose color deliberately?</p>
<ul>
<li>Using any software’s default color palette is kind of like using comic sans font on a resume</li>
<li>Choosing the “right” colors will make it easier for you to convey meaning</li>
</ul>
</section>
<section id="color-palettes-and-their-use-cases" class="level2">
<h2 class="anchored" data-anchor-id="color-palettes-and-their-use-cases">Color palettes and their use cases</h2>
<p>Toggle back and forth to the <a href="https://vega.github.io/vega/docs/schemes/">schemes</a> page:</p>
<p><strong><em>step 1</em></strong> Am I working with <code>N</code>ominal, unordered data or with ordered data (either <code>O</code>rdinal or <code>Q</code>uantitative)?</p>
<p>If <code>N</code>ominal, unordered data, use categorical palettes. Otherwise, proceed.</p>
<p><strong><em>step 2</em></strong></p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Palette type</th>
<th>Use case</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sequential Single-Hue</td>
<td></td>
</tr>
<tr class="even">
<td>Sequential Multi-Hue</td>
<td>Use for higher contrast, but harder to judge quantitative proximity</td>
</tr>
<tr class="odd">
<td>Diverging</td>
<td>Use if there is a midpoint (e.g.&nbsp;voting for <code>redblue</code>)</td>
</tr>
<tr class="even">
<td>Cyclical</td>
<td>Use if circular (e.g.&nbsp;time of day, month)</td>
</tr>
</tbody>
</table>
</section>
<section id="more-advice-on-color-choices" class="level2">
<h2 class="anchored" data-anchor-id="more-advice-on-color-choices">More advice on color choices</h2>
<ul>
<li>Use <a href="https://colorbrewer2.org">colorbrewer2.org</a> to choose your color palettes. Click through to site. Options include subsetting to colors that are
<ul>
<li>colorblind safe</li>
<li>black and white printer (aka photocopy) safe</li>
</ul></li>
<li>Harmonization
<ul>
<li><em>Within reports</em> You rarely produce a single plot in isolation. You usually produce several plots as part of a memo, a website, etc. Use consistent colors across plots.</li>
<li><em>Across reports</em> Many organizations have official palettes and plot templates. Good to ask if you are working for a big org if they have one.</li>
</ul></li>
</ul>
</section>
<section id="visual-encoding-summary" class="level2">
<h2 class="anchored" data-anchor-id="visual-encoding-summary">Visual encoding: summary</h2>
<ul>
<li>Bertin proposes seven different ways to encode visual information. His chart is a handy reference to what visual elements can encode different types of information.</li>
<li>Color is one of the easiest ways to convey meaning. Choose your palette based on whether you want to convey unordered or ordered data, whether you have a midpoint, and whether your ordered series is cyclical</li>
</ul>
</section>
</section>
<section id="encoding-channels" class="level1">
<h1>Encoding channels</h1>
<section id="encoding-channels-roadmap" class="level2">
<h2 class="anchored" data-anchor-id="encoding-channels-roadmap">Encoding channels: roadmap</h2>
<ul>
<li><code>x</code></li>
<li><code>y</code></li>
<li><code>size</code></li>
<li><code>color</code></li>
<li><code>opacity</code></li>
<li><code>shape</code></li>
<li><code>column</code></li>
<li><code>row</code></li>
</ul>
<p>Caveat: this section has a ton of slides. but each is simple.</p>
</section>
<section id="x" class="level2">
<h2 class="anchored" data-anchor-id="x">X</h2>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data2000 <span class="op">=</span> data.loc[data[<span class="st">'year'</span>] <span class="op">==</span> <span class="dv">2000</span>] <span class="co">#one year is more manageable</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point().encode(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<p><img src="marks_encoding_files/figure-html/cell-10-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="y" class="level2">
<h2 class="anchored" data-anchor-id="y">Y</h2>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point().encode(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'cluster:O'</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<p><img src="marks_encoding_files/figure-html/cell-11-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>In-class exercise: what happens if you swap the Q and the O types?</p>
</section>
<section id="do-not-require-zero-on-axis-range" class="level2">
<h2 class="anchored" data-anchor-id="do-not-require-zero-on-axis-range">Do not require zero on axis range</h2>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>zero_included <span class="op">=</span> alt.Chart(data2000).mark_point().encode(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>, scale<span class="op">=</span>alt.Scale(zero<span class="op">=</span><span class="va">False</span>)),</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>, scale<span class="op">=</span>alt.Scale(zero<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>zero_excluded <span class="op">=</span> alt.Chart(data2000).mark_point().encode(</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>zero_included <span class="op">|</span> zero_excluded</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<p><img src="marks_encoding_files/figure-html/cell-12-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Discussion question: which plot do you prefer (and why?)</p>
<!-- ZZZ delete solutions from QMD before posting -->
</section>
<section id="observations-about-whether-to-include-zero" class="level2">
<h2 class="anchored" data-anchor-id="observations-about-whether-to-include-zero">Observations about whether to include zero</h2>
<ul>
<li>If you include zero, there is a lot of wasted white space. The data are compressed into a small area. This is best if the message you want to send is that fertility varies by a factor of nearly 8 from the highest to lowest while life expectancy varies much less (from 80 to 50)</li>
<li>If you exclude zero, it is much easier to see the negative relationship between life expectancy and fertility. This is best if that is the message you want to send.</li>
</ul>
<!-- ZZZ end deletion -->
</section>
<section id="size" class="level2">
<h2 class="anchored" data-anchor-id="size"><code>size</code></h2>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point().encode(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>),</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    alt.Size(<span class="st">'pop:Q'</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<p><img src="marks_encoding_files/figure-html/cell-13-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="size-with-1000-pixels-for-largest-dot" class="level2">
<h2 class="anchored" data-anchor-id="size-with-1000-pixels-for-largest-dot"><code>size</code> with 1000 pixels for largest dot</h2>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point().encode(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    alt.Size(<span class="st">'pop:Q'</span>, scale<span class="op">=</span>alt.Scale(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1000</span>]))</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<p><img src="marks_encoding_files/figure-html/cell-14-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="add-color-and-size-with-filledtrue" class="level2">
<h2 class="anchored" data-anchor-id="add-color-and-size-with-filledtrue">add <code>color</code> and <code>size</code> with <code>filled=True</code></h2>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point(filled<span class="op">=</span><span class="va">True</span>).encode(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    alt.Size(<span class="st">'pop:Q'</span>, scale<span class="op">=</span>alt.Scale(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1000</span>])),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'cluster:N'</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<p><img src="marks_encoding_files/figure-html/cell-15-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="opacity" class="level2">
<h2 class="anchored" data-anchor-id="opacity"><code>opacity</code></h2>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point(filled<span class="op">=</span><span class="va">True</span>).encode(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>),</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    alt.Size(<span class="st">'pop:Q'</span>, scale<span class="op">=</span>alt.Scale(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1000</span>])),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'cluster:N'</span>),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    alt.OpacityValue(<span class="fl">0.2</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<p><img src="marks_encoding_files/figure-html/cell-16-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="column" class="level2">
<h2 class="anchored" data-anchor-id="column"><code>column</code></h2>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point(filled<span class="op">=</span><span class="va">True</span>).encode(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>),</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    alt.Size(<span class="st">'pop:Q'</span>, scale<span class="op">=</span>alt.Scale(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1000</span>])),</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'cluster:N'</span>),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    alt.OpacityValue(<span class="fl">0.5</span>),</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    alt.Tooltip(<span class="st">'country:N'</span>),</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    alt.Column(<span class="st">'cluster:N'</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<p><img src="marks_encoding_files/figure-html/cell-17-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="adjust-aspect-ratio-move-pop-legend-remove-color-legend" class="level2">
<h2 class="anchored" data-anchor-id="adjust-aspect-ratio-move-pop-legend-remove-color-legend">adjust aspect ratio, move pop legend, remove color legend</h2>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point(filled<span class="op">=</span><span class="va">True</span>).encode(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    alt.Size(<span class="st">'pop:Q'</span>, scale<span class="op">=</span>alt.Scale(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1000</span>]),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>             legend<span class="op">=</span>alt.Legend(orient<span class="op">=</span><span class="st">'bottom'</span>, titleOrient<span class="op">=</span><span class="st">'left'</span>)),</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'cluster:N'</span>, legend<span class="op">=</span><span class="va">None</span>),</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    alt.OpacityValue(<span class="fl">0.5</span>),</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    alt.Tooltip(<span class="st">'country:N'</span>),</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    alt.Column(<span class="st">'cluster:N'</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>).properties(width<span class="op">=</span><span class="dv">135</span>, height<span class="op">=</span><span class="dv">135</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<p><img src="marks_encoding_files/figure-html/cell-18-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="in-class-exercise" class="level2">
<h2 class="anchored" data-anchor-id="in-class-exercise">in-class exercise</h2>
<p>The plot faceted by column doesn’t fit on the page. Redo it instead faceted by row.</p>
<p>Bonus: It still looks bad. What further change is needed?</p>
<!-- ZZZ delete before posting QMD -->
</section>
<section id="in-class-exercise-solution" class="level2">
<h2 class="anchored" data-anchor-id="in-class-exercise-solution">in-class exercise: solution</h2>
<ul>
<li>substitute <code>Row</code> for <code>Column</code></li>
<li>delete <code>orient='bottom'</code></li>
</ul>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point(filled<span class="op">=</span><span class="va">True</span>).encode(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    alt.Size(<span class="st">'pop:Q'</span>, scale<span class="op">=</span>alt.Scale(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1000</span>]),</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>             legend<span class="op">=</span>alt.Legend(orient<span class="op">=</span><span class="st">'bottom'</span>, titleOrient<span class="op">=</span><span class="st">'left'</span>)),</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'cluster:N'</span>, legend<span class="op">=</span><span class="va">None</span>),</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    alt.OpacityValue(<span class="fl">0.5</span>),</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    alt.Tooltip(<span class="st">'country:N'</span>),</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    alt.Row(<span class="st">'cluster:N'</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>).properties(width<span class="op">=</span><span class="dv">135</span>, height<span class="op">=</span><span class="dv">135</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<p><img src="marks_encoding_files/figure-html/cell-19-output-1.png" class="img-fluid"></p>
</div>
</div>
<!-- ZZZ end deletion -->
</section>
<section id="encoding-channels-summary" class="level2">
<h2 class="anchored" data-anchor-id="encoding-channels-summary">Encoding channels: summary</h2>
<ul>
<li><code>x</code>: Horizontal (x-axis) position of the mark.</li>
<li><code>y</code>: Vertical (y-axis) position of the mark.</li>
<li><code>size</code>: Size of the mark. May correspond to area or length, depending on the mark type.</li>
<li><code>color</code>: Mark color, specified as a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value">legal CSS color</a>.</li>
<li><code>opacity</code>: Mark opacity, ranging from 0 (fully transparent) to 1 (fully opaque).</li>
<li><code>shape</code>: Plotting symbol shape for <code>point</code> marks.</li>
<li><code>column</code>: Facet the data into horizontally-aligned subplots.</li>
<li><code>row</code>: Facet the data into vertically-aligned subplots.</li>
</ul>
</section>
</section>
<section id="graphical-marks" class="level1">
<h1>Graphical marks</h1>
<section id="graphical-marks-roadmap" class="level2">
<h2 class="anchored" data-anchor-id="graphical-marks-roadmap">Graphical marks: roadmap</h2>
<p>Prior section used only <code>mark_point()</code>. Now will cover</p>
<ul>
<li><code>mark_point()</code>
<ul>
<li><code>mark_circle()</code><br>
</li>
<li><code>mark_square()</code></li>
<li><code>mark_tick()</code></li>
</ul></li>
<li><code>mark_bar()</code></li>
<li><code>mark_line()</code><br>
</li>
<li><code>mark_area()</code></li>
</ul>
<p>Caveats:</p>
<ul>
<li>there are a ton of slides in this section.</li>
<li>but each slide is simple. focus is on software. most discussion of principles deferred for the “Graphics Theory” section.</li>
</ul>
</section>
<section id="mark_point-add-information-using-alt.shape" class="level2">
<h2 class="anchored" data-anchor-id="mark_point-add-information-using-alt.shape"><code>mark_point()</code>: add information using <code>alt.Shape()</code></h2>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point().encode(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>, scale<span class="op">=</span>alt.Scale(zero<span class="op">=</span><span class="va">False</span>)),</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    alt.Shape(<span class="st">'cluster:N'</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<p><img src="marks_encoding_files/figure-html/cell-20-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_point-format-points-using-arguments" class="level2">
<h2 class="anchored" data-anchor-id="mark_point-format-points-using-arguments"><code>mark_point()</code>: format points using arguments</h2>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_point(filled<span class="op">=</span><span class="va">True</span>, size<span class="op">=</span><span class="dv">100</span>).encode(</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>, scale<span class="op">=</span>alt.Scale(zero<span class="op">=</span><span class="va">False</span>)),</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    alt.Shape(<span class="st">'cluster:N'</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<p><img src="marks_encoding_files/figure-html/cell-21-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_circle-wrapper-for-mark_pointfilledtrue" class="level2">
<h2 class="anchored" data-anchor-id="mark_circle-wrapper-for-mark_pointfilledtrue"><code>mark_circle()</code> wrapper for <code>mark_point(filled=True)</code></h2>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_circle(size<span class="op">=</span><span class="dv">100</span>).encode(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>, scale<span class="op">=</span>alt.Scale(zero<span class="op">=</span><span class="va">False</span>)),</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    alt.Shape(<span class="st">'cluster:N'</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<p><img src="marks_encoding_files/figure-html/cell-22-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_square" class="level2">
<h2 class="anchored" data-anchor-id="mark_square"><code>mark_square()</code></h2>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_square(size<span class="op">=</span><span class="dv">100</span>).encode(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'life_expect:Q'</span>, scale<span class="op">=</span>alt.Scale(zero<span class="op">=</span><span class="va">False</span>)),</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    alt.Shape(<span class="st">'cluster:N'</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<p><img src="marks_encoding_files/figure-html/cell-23-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_tick" class="level2">
<h2 class="anchored" data-anchor-id="mark_tick"><code>mark_tick()</code></h2>
<ul>
<li>Useful for comparing values along a single dimension with minimal overlap.</li>
<li>A <em>dot plot</em> drawn with tick marks is sometimes referred to as a <em>strip plot</em>.</li>
</ul>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_tick().encode(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'fertility:Q'</span>),</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'cluster:N'</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<p><img src="marks_encoding_files/figure-html/cell-24-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_bar" class="level2">
<h2 class="anchored" data-anchor-id="mark_bar"><code>mark_bar()</code></h2>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_bar().encode(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'country:N'</span>),</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'pop:Q'</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<p><img src="marks_encoding_files/figure-html/cell-25-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="use-alt.color-for-a-stacked-bar-plot" class="level2">
<h2 class="anchored" data-anchor-id="use-alt.color-for-a-stacked-bar-plot">use <code>alt.Color()</code> for a stacked bar plot</h2>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_bar().encode(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'cluster:N'</span>),</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'pop:Q'</span>),</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'country:N'</span>, legend<span class="op">=</span><span class="va">None</span>) </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<p><img src="marks_encoding_files/figure-html/cell-26-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Note: if we had instead set <code>alt.Y('pop:Q', stack=None)</code>, bars would have been overlapped with each other</p>
</section>
<section id="x2-to-show-intervals" class="level2">
<h2 class="anchored" data-anchor-id="x2-to-show-intervals"><code>X2()</code> to show intervals</h2>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data2000).mark_bar().encode(</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'min(life_expect):Q'</span>),</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    alt.X2(<span class="st">'max(life_expect):Q'</span>),</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'cluster:N'</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<p><img src="marks_encoding_files/figure-html/cell-27-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_line" class="level2">
<h2 class="anchored" data-anchor-id="mark_line"><code>mark_line()</code></h2>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>data_4a <span class="op">=</span> data.loc[data[<span class="st">'cluster'</span>] <span class="op">==</span> <span class="dv">2</span>] <span class="co">#one cluster is more manageable</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>alt.Chart(data_4a).mark_line().encode(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'year:O'</span>),</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'fertility:Q'</span>),</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'country:N'</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">400</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<p><img src="marks_encoding_files/figure-html/cell-28-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="how-many-lines-tooltip-instead-of-legend" class="level2">
<h2 class="anchored" data-anchor-id="how-many-lines-tooltip-instead-of-legend">how many lines? <code>Tooltip</code> instead of <code>legend</code></h2>
<p>textbook advocates for having a plot with many more lines, no legend, and instead using <code>alt.Tooltip('country:N')</code>. This is technologically feasible but a bad idea. (Discuss: why?)</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data).mark_line().encode(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'year:O'</span>),</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'fertility:Q'</span>),</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'country:N'</span>, legend<span class="op">=</span><span class="va">None</span>),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    alt.Tooltip(<span class="st">'country:N'</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">400</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<p><img src="marks_encoding_files/figure-html/cell-29-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_line-with-cosmetic-adjustments" class="level2">
<h2 class="anchored" data-anchor-id="mark_line-with-cosmetic-adjustments"><code>mark_line()</code> with cosmetic adjustments</h2>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(data_4a).mark_line(</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    strokeWidth<span class="op">=</span><span class="dv">3</span>,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    opacity<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    interpolate<span class="op">=</span><span class="st">'monotone'</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>).encode(</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'year:O'</span>),</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'fertility:Q'</span>),</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'country:N'</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">400</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<p><img src="marks_encoding_files/figure-html/cell-30-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_line-with-cosmetic-adjustments-1" class="level2">
<h2 class="anchored" data-anchor-id="mark_line-with-cosmetic-adjustments-1"><code>mark_line()</code> with cosmetic adjustments</h2>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>data_4a_2y <span class="op">=</span> data_4a[data_4a[<span class="st">'year'</span>].isin([<span class="dv">1955</span>, <span class="dv">2005</span>])]</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>alt.Chart(data_4a_2y).mark_line().encode(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'year:O'</span>),</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'fertility:Q'</span>),</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'country:N'</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">400</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<p><img src="marks_encoding_files/figure-html/cell-31-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_area" class="level2">
<h2 class="anchored" data-anchor-id="mark_area"><code>mark_area()</code></h2>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>dataUS <span class="op">=</span> data.loc[data[<span class="st">'country'</span>] <span class="op">==</span> <span class="st">'United States'</span>]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>alt.Chart(dataUS).mark_area().encode(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'year:O'</span>),</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'fertility:Q'</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<p><img src="marks_encoding_files/figure-html/cell-32-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_area-with-interpolatemonotone" class="level2">
<h2 class="anchored" data-anchor-id="mark_area-with-interpolatemonotone"><code>mark_area()</code> with <code>interpolate='monotone'</code></h2>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(dataUS).mark_area(interpolate<span class="op">=</span><span class="st">'monotone'</span>).encode(</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'year:O'</span>),</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'fertility:Q'</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<p><img src="marks_encoding_files/figure-html/cell-33-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_area-with-stacking" class="level2">
<h2 class="anchored" data-anchor-id="mark_area-with-stacking"><code>mark_area()</code> with stacking</h2>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>dataNA <span class="op">=</span> data[data[<span class="st">'country'</span>].isin([<span class="st">'United States'</span>, <span class="st">'Mexico'</span>, <span class="st">'Canada'</span>])]</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>alt.Chart(dataNA).mark_area().encode(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'year:O'</span>),</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'pop:Q'</span>),</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'country:N'</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<p><img src="marks_encoding_files/figure-html/cell-34-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_area-with-no-stacking-and-opacity" class="level2">
<h2 class="anchored" data-anchor-id="mark_area-with-no-stacking-and-opacity"><code>mark_area()</code> with no stacking and opacity</h2>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(dataNA).mark_area(opacity<span class="op">=</span><span class="fl">0.5</span>).encode(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'year:O'</span>),</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'pop:Q'</span>, stack<span class="op">=</span><span class="va">None</span>),</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">'country:N'</span>)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<p><img src="marks_encoding_files/figure-html/cell-35-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="mark_area-to-show-range" class="level2">
<h2 class="anchored" data-anchor-id="mark_area-to-show-range"><code>mark_area()</code> to show range</h2>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(dataNA).mark_area().encode(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'year:O'</span>),</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'min(fertility):Q'</span>),</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    alt.Y2(<span class="st">'max(fertility):Q'</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span>{<span class="st">"step"</span>: <span class="dv">40</span>}</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<p><img src="marks_encoding_files/figure-html/cell-36-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>We can see a larger range of values in 1995, from just under 4 to just under 7. By 2005, both the overall fertility values and the variability have declined, centered around 2 children per familty.</p>
</section>
<section id="syntax-mark_area-swap-axes" class="level2">
<h2 class="anchored" data-anchor-id="syntax-mark_area-swap-axes">Syntax: <code>mark_area()</code> swap axes</h2>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>alt.Chart(dataNA).mark_area().encode(</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'year:O'</span>),</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'min(fertility):Q'</span>),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    alt.X2(<span class="st">'max(fertility):Q'</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span>{<span class="st">"step"</span>: <span class="dv">40</span>}</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<p><img src="marks_encoding_files/figure-html/cell-37-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="graphical-marks-summary" class="level2">
<h2 class="anchored" data-anchor-id="graphical-marks-summary">Graphical marks: summary</h2>
<p>Covered today</p>
<ul>
<li><code>mark_point()</code> - Scatter plot points with configurable shapes.
<ul>
<li><code>mark_circle()</code> - Scatter plot points as filled circles.</li>
<li><code>mark_square()</code> - Scatter plot points as filled squares.</li>
<li><code>mark_tick()</code> - Vertical or horizontal tick marks.</li>
</ul></li>
<li><code>mark_bar()</code> - Rectangular bars.</li>
<li><code>mark_line()</code> - Connected line segments.</li>
<li><code>mark_area()</code> - Filled areas defined by a top-line and a baseline.</li>
</ul>
<p>Not covered in lecture</p>
<ul>
<li><code>mark_rect()</code> - Filled rectangles, useful for heatmaps.</li>
<li><code>mark_rule()</code> - Vertical or horizontal lines spanning the axis.</li>
<li><code>mark_text()</code> - Scatter plot points represented by text.</li>
</ul>
<p>For a complete list, and links to examples, see the <a href="https://altair-viz.github.io/user_guide/marks/index.html">Altair marks documentation</a>.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>